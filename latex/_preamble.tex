% =============================================================================
% GitHub Copilot 가이드 공통 프리앰블
% _preamble.tex - 모든 LaTeX 문서에서 \input{_preamble} 으로 재사용
% =============================================================================

% --- DOCUMENT VERSION CONTROL ---
% PDF 빌드 시점의 날짜와 시간(KST, UTC+9)이 자동으로 반영됩니다
% 참고: Overleaf 서버는 CET(UTC+1) 시간대를 사용하므로 +8로 보정합니다
\usepackage{datetime2}
\ExplSyntaxOn
\int_new:N \g_kst_hour_int
\int_new:N \g_kst_day_int
\int_new:N \g_kst_month_int
\int_new:N \g_kst_year_int
\int_gset:Nn \g_kst_hour_int { \the\time / 60 + 9 }
\int_gset:Nn \g_kst_day_int { \the\day }
\int_gset:Nn \g_kst_month_int { \the\month }
\int_gset:Nn \g_kst_year_int { \the\year }
\int_compare:nNnT { \g_kst_hour_int } > { 23 }
  {
    \int_gadd:Nn \g_kst_hour_int { -24 }
    \int_gincr:N \g_kst_day_int
  }
\newcommand{\docversion}{최종~수정:~\int_use:N \g_kst_year_int.~\int_compare:nNnTF { \g_kst_month_int } < { 10 } {0}{} \int_use:N \g_kst_month_int.~\int_compare:nNnTF { \g_kst_day_int } < { 10 } {0}{} \int_use:N \g_kst_day_int.
  \c_space_tl \int_compare:nNnTF { \g_kst_hour_int } < { 10 } {0}{} \int_use:N \g_kst_hour_int
  : \int_compare:nNnTF { \int_mod:nn {\the\time} {60} } < { 10 } {0}{} \int_eval:n { \int_mod:nn {\the\time} {60} }}
\newcommand{\docdate}{\int_use:N \g_kst_year_int 년~\int_compare:nNnTF { \g_kst_month_int } < { 10 } {0}{} \int_use:N \g_kst_month_int 월~\int_compare:nNnTF { \g_kst_day_int } < { 10 } {0}{} \int_use:N \g_kst_day_int 일}
\ExplSyntaxOff

% --- 저자 정보 (각 문서에서 재정의 가능) ---
\providecommand{\authors}{동의대학교 서진석(jsseo@deu.ac.kr)}

% --- UNIVERSAL PREAMBLE BLOCK ---
\usepackage[a4paper, top=3cm, bottom=3cm, left=2.5cm, right=2.5cm, headheight=14pt]{geometry}
\usepackage{fontspec}

% Language setup for Korean
\usepackage[korean, provide=*]{babel}

% Fonts: Using Noto Serif for body (formal) and Noto Sans for headers
\babelfont{rm}{Noto Serif CJK KR}
\babelfont{sf}{Noto Sans CJK KR}

% CJK 폰트는 이탤릭이 없으므로 폰트 대체 규칙 설정 (경고 방지)
\DeclareFontShape{TU}{NotoSerifCJKKR(0)}{m}{it}{<->ssub*NotoSerifCJKKR(0)/m/n}{}
\DeclareFontShape{TU}{NotoSerifCJKKR(0)}{m}{sl}{<->ssub*NotoSerifCJKKR(0)/m/n}{}
\DeclareFontShape{TU}{NotoSerifCJKKR(0)}{bx}{it}{<->ssub*NotoSerifCJKKR(0)/bx/n}{}
\DeclareFontShape{TU}{NotoSansCJKKR(0)}{m}{it}{<->ssub*NotoSansCJKKR(0)/m/n}{}
\DeclareFontShape{TU}{NotoSansCJKKR(0)}{m}{sl}{<->ssub*NotoSansCJKKR(0)/m/n}{}
\DeclareFontShape{TU}{NotoSansCJKKR(0)}{bx}{it}{<->ssub*NotoSansCJKKR(0)/bx/n}{}

% Essential Packages
\usepackage{enumitem}
\usepackage{booktabs}   % Professional tables
\usepackage{tabularx}   % Auto-width tables
\usepackage{titlesec}   % Section formatting
\usepackage{xcolor}     % Colors for visual hierarchy
\usepackage{fancyhdr}   % Headers and footers
\usepackage{setspace}   % Line spacing
\usepackage{longtable}  % For tables that might span pages
\usepackage{xltabular}  % For flexible width long tables
\usepackage{float}      % For [H] option to fix table position
\usepackage{kotex}      % Additional Korean support insurance
\usepackage[hidelinks]{hyperref}

% --- STYLING COMMANDS ---

% Define a formal navy blue for headers
\definecolor{eduNavy}{RGB}{0, 43, 91}

% Section styling
\titleformat{\section}
  {\Large\sffamily\bfseries\color{eduNavy}}
  {\thesection}{1em}{}
  [\vspace{-0.5em}\hrule height 1pt]

\titleformat{\subsection}
  {\large\sffamily\bfseries\color{eduNavy}}
  {\thesubsection}{1em}{}

\titleformat{\subsubsection}
  {\normalsize\sffamily\bfseries\color{eduNavy}}
  {\thesubsubsection}{1em}{}

% List settings
\setlist[itemize]{label=\textbullet, leftmargin=1.5em, itemsep=0.2em}
\setlist[enumerate]{label=\arabic*., leftmargin=1.5em, itemsep=0.2em}

% Line spacing for readability
\setstretch{1.2}

% Header and Footer
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\small\sffamily \authors}
\fancyhead[R]{\small\sffamily \docversion}
\fancyfoot[C]{\thepage}
\renewcommand{\headrulewidth}{0.5pt}

% =============================================================================
% 사용법:
% 각 문서에서 다음과 같이 사용합니다:
%
% \documentclass[11pt, a4paper]{article}
% \input{_preamble}
%
% % 필요시 저자 재정의
% \renewcommand{\authors}{작성자명 (email@example.com)}
%
% % 제목 설정
% \title{...}
% \author{\authors}
% \date{\docversion}
%
% \begin{document}
% \maketitle
% ...
% \end{document}
% =============================================================================
