<!DOCTYPE html>
<html lang="{{ site.lang | default: " en-US" }}">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  {% seo %}
  <link rel="stylesheet" href="{{ " /assets/css/style.css?v=" | append: site.github.build_revision | relative_url }}">
  <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->
</head>

<body>
  <div class="wrapper">
    <header>
      <h1><a href="{{ " /" | absolute_url }}">{{ site.title | default: site.github.repository_name }}</a></h1>

      <p>{{ site.description | default: site.github.project_tagline }}</p>

      {% if site.github.is_project_page %}
      <p class="view"><a href="{{ site.github.repository_url }}">View the Project on GitHub <small>{{
            site.github.repository_name }}</small></a></p>
      {% endif %}

      {% if site.github.is_user_page %}
      <p class="view"><a href="{{ site.github.owner_url }}">View My GitHub Profile</a></p>
      {% endif %}
    </header>
    <section>

      {{ content }}

    </section>
    <footer>
      <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small>
      </p>
    </footer>
  </div>
  <script src="{{ " /assets/js/scale.fix.js" | relative_url }}"></script>

  <!-- Mermaid JS -->
  <!-- Mermaid JS - Traditional UMD approach -->
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <script>
    console.log('Mermaid script loaded');

    document.addEventListener('DOMContentLoaded', function () {
      console.log('DOM loaded, searching for Mermaid blocks...');

      // Find all potential mermaid code blocks
      const selectors = [
        'pre code.language-mermaid',
        'code.language-mermaid',
        '.language-mermaid',
        'div.language-mermaid',
        'pre.language-mermaid'
      ];

      let found = false;
      selectors.forEach(selector => {
        const elements = document.querySelectorAll(selector);
        console.log(`Found ${elements.length} elements with selector: ${selector}`);

        elements.forEach((element, index) => {
          found = true;
          console.log(`Processing element ${index} from ${selector}`);

          // Get the text content
          const content = element.textContent;
          console.log(`Content length: ${content.length}`);

          // Create new mermaid div
          const div = document.createElement('div');
          div.className = 'mermaid';
          div.textContent = content;

          // Find the container to replace
          let container = element;
          if (element.tagName === 'CODE') {
            const pre = element.closest('pre');
            if (pre) container = pre;
          }

          // Check for highlighter-rouge wrapper
          const wrapper = container.closest('div.highlighter-rouge, div.highlight');
          if (wrapper) container = wrapper;

          // Replace it
          console.log(`Replacing ${container.tagName}`);
          container.parentNode.replaceChild(div, container);
        });
      });

      if (found) {
        console.log('Initializing Mermaid...');
        mermaid.initialize({
          startOnLoad: true,
          theme: 'default'
        });
        mermaid.contentLoaded();
      } else {
        console.warn('No Mermaid code blocks found!');
      }
    });
  </script>
</body>

</html>